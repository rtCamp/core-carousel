# Development Reference

This project uses **npm**, **Composer**, and **Make** for development and build workflows.

## Quick Start

```bash
# Fast setup for development (installs dependencies & builds)
make dev

# Start development server (watches for changes)
npm start
```

## Available Commands

### Build & Watch

| Command | Description |
| :--- | :--- |
| `npm start` | Starts the build in watch mode. |
| `make dev` | **Development Build.** Fast, incremental install (`npm install`) + build. |
| `make build` | **Production Build.** Clean install (`npm ci`) + build. Slow but safe. |

### Quality Control (Linting & Testing)

| Command | Description |
| :--- | :--- |
| `npm run lint:js` | Lints JavaScript and TypeScript files. |
| `npm run lint:js:fix` | Fixes JS/TS linting errors. |
| `npm run lint:css` | Lints SCSS files. |
| `npm run lint:css:fix` | Fixes SCSS linting errors. |
| `composer run lint` | Lints PHP files (PHPCS). |
| `composer run format` | Fixes PHP linting errors (PHPCBF). |
| `composer run phpstan` | Runs static analysis with PHPStan. |

### Distribution

| Command | Description |
| :--- | :--- |
| `make zip` | **Production Build.** Runs a clean install (`npm ci`) and creates the ZIP. |
| `make quick-zip` | **Development Package.** Uses existing `node_modules` (incremental) for faster zipping. |
| `make clean` | Removes build artifacts (`build/`, `vendor/`, `node_modules/`, `.zip`). |

### Versioning & Changelog

| Command | Description |
| :--- | :--- |
| `npm run changelog` | Generates/Updates `CHANGELOG.md` based on commits. |
| `npm run version` | Internal hook used by `npm version` to update changelog and stage it. |
| `npm version [major|minor|patch]` | Bumps version in `package.json`, updates `CHANGELOG.md`, and creates a git tag. |

## Local GitHub Actions (act)

To test the release workflow locally, we use [act](https://github.com/nektos/act).

### Prerequisites
- [Docker](https://www.docker.com/products/docker-desktop/) installed and running.
- `act` installed: `brew install act` (macOS).

### Usage
```bash
# Run the release workflow locally
make act
# OR
npm run test:actions
```

## Directory Structure

- `src/` - Source code for blocks (React/TypeScript/SCSS).
- `inc/` - PHP classes and traits (PSR-4 `Core_Carousel`).
- `build/` - Compiled assets (generated by `npm run build`).
- `docs/` - Documentation files.
- `examples/` - Block patterns and examples.
